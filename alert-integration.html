<html>

<head>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="script-integration.js"></script>
</head>

<body>

    <div>
        <div id='map' style='width: 100%; height: 450px;'></div>
        <img style="display:none" id="image_warning" src="img/warning2.png" />
    </div>

    <script>
        $(document).ready(function () {

            //var polygonApiUrl = "https://manager-view-exp-qa.au.cloudhub.io/api/exp/map/polygons/" + country + "?zoomlevel=" + zoomLevel;
            //https://aihpl-dev.outsystemsenterprise.com/MyAssist/rest/api/GetDestination?
            var alertApiUrl = "https://manager-view-exp-qa.au.cloudhub.io/api/exp/alerts/76cafc96-1575-490f-b4d7-91c07781bc84?partyId=123&userId=alexander.oss@internationalsos.com";

            initializeMapbox("pk.eyJ1IjoiaW50ZXJuYXRpb25hbHNvcyIsImEiOiJjamo1cDNpOWsxdnB2M3BzMjAzNWk1b2FoIn0.49i92ZK8WKifgkSEKtDB7Q",
                "map", 'mapbox://styles/mapbox/streets-v9', 1);


            // var getPolygon = $.when($.ajax({
            //     url: polygonApiUrl,
            //     type: 'GET',
            //     beforeSend: function (xhr) {
            //         xhr.setRequestHeader('Authorization', '123');
            //         xhr.setRequestHeader('clientId', 'a098e60561a944b4b24fa895dc43e399');
            //         xhr.setRequestHeader('clientSecret', '84820943d47e475Da05184e145F226Ae');
            //     }
            // }));

            var getAlert = $.when($.ajax({
                url: alertApiUrl,
                type: 'GET',
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', '123');
                    xhr.setRequestHeader('clientId', 'a098e60561a944b4b24fa895dc43e399');
                    xhr.setRequestHeader('clientSecret', '84820943d47e475Da05184e145F226Ae');
                }
            }));

            getAlert.then(function (alertData, alertTextStatus, alertjqXHR) {
                
            });

        });
    </script>

</body>

</html>